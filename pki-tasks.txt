
playbook: ansible/pki-playbook.yml

  play #1 (all): safe-guard against race condition	TAGS: []
    tasks:
      wait for the node to be ready	TAGS: [bootstrap]

  play #2 (pki_server): install Dogtag PKI CA	TAGS: []
    tasks:
      bootstrap : Check default route	TAGS: [bootstrap]
      bootstrap : Create some default route	TAGS: [bootstrap]
      bootstrap : Check for dnf command	TAGS: [bootstrap, package-install]
      bootstrap : Auto select fastest DNF mirror	TAGS: [bootstrap, package-install]
      bootstrap : Refresh dnf cache	TAGS: [bootstrap, network, package-install]
      bootstrap : Install python2 and deps for ansible modules	TAGS: [bootstrap, network, package-install]
      bootstrap : Gather facts	TAGS: [bootstrap]
      bootstrap : Create directories in ipa_data_dir	TAGS: [bootstrap]
      bootstrap : Dummy (for ansible.skip_tags)	TAGS: [dummy]
      common : DNF or YUM?	TAGS: [common]
      common : Default facts (enable_packages, enable_network)	TAGS: [common]
      common : Override enable_packages=true	TAGS: [common, package-install]
      common : Override enable_network=true	TAGS: [common, network]
      common : Get nmcli device info	TAGS: [common]
      common : Set nmcli device info fact	TAGS: [common]
      common : fix /etc/hosts	TAGS: [common]
      common : Set FQDN hostname	TAGS: [common]
      common : Get timedatectl information	TAGS: [common]
      common : Set timezone to UTC	TAGS: [common]
      common : Disable dnf repos to prevent network access	TAGS: [common]
      common : Enable dnf repos	TAGS: [common]
      common : Auto select fastest DNF mirror	TAGS: [common, package-install]
      common : Enable yum for Fedora	TAGS: [common, network, package-install]
      common : Disable yum repos to prevent network access	TAGS: [common]
      common : Enable yum repos	TAGS: [common]
      common : Auto-select fastest yum mirror	TAGS: [common, network, package-install]
      common : Install gpg command for COPR / rpm_key	TAGS: [common, network, package-copr, package-install]
      common : Add GPG RPM keys for copr	TAGS: [common, network, package-copr, package-install]
      common : Enable extra COPRs	TAGS: [common, network, package-copr, package-install]
      common : upgrade all packages	TAGS: [common, network, package-install, package-upgrade]
      common : Create directory for custom RPMS	TAGS: [common, custom-rpms]
      common : Install rsync	TAGS: [common, custom-rpms, network, package-install]
      common : Synchronize RPMs	TAGS: [common, custom-rpms]
      common : find custom RPMs	TAGS: [common, custom-rpms]
      common : install custom RPMs	TAGS: [common, custom-rpms]
      common : install selinux tools	TAGS: [common, network, package-install]
      common : disable selinux for 389-DS installation	TAGS: [common, lxc]
      common : install firewalld	TAGS: [firewall, network, package-install, pki]
      common : check for firewalld	TAGS: [common, firewall]
      common : Enable and start firewalld	TAGS: [common, firewall]
      common : Open firewall ports elemental services	TAGS: [common, firewall]
      common : Install rng tools	TAGS: [common, network, package-install]
      common : Start the rngd service	TAGS: [common]
      common : tty-less sudo	TAGS: [common]
      bootstrap : Check default route	TAGS: [bootstrap]
      bootstrap : Create some default route	TAGS: [bootstrap]
      bootstrap : Check for dnf command	TAGS: [bootstrap, package-install]
      bootstrap : Auto select fastest DNF mirror	TAGS: [bootstrap, package-install]
      bootstrap : Refresh dnf cache	TAGS: [bootstrap, network, package-install]
      bootstrap : Install python2 and deps for ansible modules	TAGS: [bootstrap, network, package-install]
      bootstrap : Gather facts	TAGS: [bootstrap]
      bootstrap : Create directories in ipa_data_dir	TAGS: [bootstrap]
      bootstrap : Dummy (for ansible.skip_tags)	TAGS: [dummy]
      common : DNF or YUM?	TAGS: [common]
      common : Default facts (enable_packages, enable_network)	TAGS: [common]
      common : Override enable_packages=true	TAGS: [common, package-install]
      common : Override enable_network=true	TAGS: [common, network]
      common : Get nmcli device info	TAGS: [common]
      common : Set nmcli device info fact	TAGS: [common]
      common : fix /etc/hosts	TAGS: [common]
      common : Set FQDN hostname	TAGS: [common]
      common : Get timedatectl information	TAGS: [common]
      common : Set timezone to UTC	TAGS: [common]
      common : Disable dnf repos to prevent network access	TAGS: [common]
      common : Enable dnf repos	TAGS: [common]
      common : Auto select fastest DNF mirror	TAGS: [common, package-install]
      common : Enable yum for Fedora	TAGS: [common, network, package-install]
      common : Disable yum repos to prevent network access	TAGS: [common]
      common : Enable yum repos	TAGS: [common]
      common : Auto-select fastest yum mirror	TAGS: [common, network, package-install]
      common : Install gpg command for COPR / rpm_key	TAGS: [common, network, package-copr, package-install]
      common : Add GPG RPM keys for copr	TAGS: [common, network, package-copr, package-install]
      common : Enable extra COPRs	TAGS: [common, network, package-copr, package-install]
      common : upgrade all packages	TAGS: [common, network, package-install, package-upgrade]
      common : Create directory for custom RPMS	TAGS: [common, custom-rpms]
      common : Install rsync	TAGS: [common, custom-rpms, network, package-install]
      common : Synchronize RPMs	TAGS: [common, custom-rpms]
      common : find custom RPMs	TAGS: [common, custom-rpms]
      common : install custom RPMs	TAGS: [common, custom-rpms]
      common : install selinux tools	TAGS: [common, network, package-install]
      common : disable selinux for 389-DS installation	TAGS: [common, lxc]
      common : install firewalld	TAGS: [firewall, network, package-install, pki]
      common : check for firewalld	TAGS: [common, firewall]
      common : Enable and start firewalld	TAGS: [common, firewall]
      common : Open firewall ports elemental services	TAGS: [common, firewall]
      common : Install rng tools	TAGS: [common, network, package-install]
      common : Start the rngd service	TAGS: [common]
      common : tty-less sudo	TAGS: [common]
      pki-389ds : install 389-DS LDAP server	TAGS: [389ds, network, package-install]
      pki-389ds : create 389-DS instance	TAGS: [389ds]
      pki : install pki-server packages and dependencies	TAGS: [network, package-install, pki]
      pki : Open Firewall for services	TAGS: [firewall, pki]
      pki : Open Firewall for ports	TAGS: [firewall, pki]
      pki-ca : install pki-ca package	TAGS: [network, package-install, pkica]
      pki-ca : Write CA config template	TAGS: [pkica]
      pki-ca : create CA	TAGS: [ipa-install, pkica]
      pki-ca : check for tomcat memory limit	TAGS: [pki, pki-install]
      pki-ca : limit tomcat memory	TAGS: [ipa-install, pki]
      pki-ca : restart tomcat	TAGS: [pki, pki-install]
      pki-ca : wait for tomcat	TAGS: [pki, pki-install]
      pki-ca : dump admin PKCS12 file to PEM file	TAGS: [pki, pki-install]
      pki-ca : fetch admin cert as /tmp/{{pki_instance_name}}_admin.pem	TAGS: [pki, pki-install]
      bootstrap : Check default route	TAGS: [bootstrap]
      bootstrap : Create some default route	TAGS: [bootstrap]
      bootstrap : Check for dnf command	TAGS: [bootstrap, package-install]
      bootstrap : Auto select fastest DNF mirror	TAGS: [bootstrap, package-install]
      bootstrap : Refresh dnf cache	TAGS: [bootstrap, network, package-install]
      bootstrap : Install python2 and deps for ansible modules	TAGS: [bootstrap, network, package-install]
      bootstrap : Gather facts	TAGS: [bootstrap]
      bootstrap : Create directories in ipa_data_dir	TAGS: [bootstrap]
      bootstrap : Dummy (for ansible.skip_tags)	TAGS: [dummy]
      common : DNF or YUM?	TAGS: [common]
      common : Default facts (enable_packages, enable_network)	TAGS: [common]
      common : Override enable_packages=true	TAGS: [common, package-install]
      common : Override enable_network=true	TAGS: [common, network]
      common : Get nmcli device info	TAGS: [common]
      common : Set nmcli device info fact	TAGS: [common]
      common : fix /etc/hosts	TAGS: [common]
      common : Set FQDN hostname	TAGS: [common]
      common : Get timedatectl information	TAGS: [common]
      common : Set timezone to UTC	TAGS: [common]
      common : Disable dnf repos to prevent network access	TAGS: [common]
      common : Enable dnf repos	TAGS: [common]
      common : Auto select fastest DNF mirror	TAGS: [common, package-install]
      common : Enable yum for Fedora	TAGS: [common, network, package-install]
      common : Disable yum repos to prevent network access	TAGS: [common]
      common : Enable yum repos	TAGS: [common]
      common : Auto-select fastest yum mirror	TAGS: [common, network, package-install]
      common : Install gpg command for COPR / rpm_key	TAGS: [common, network, package-copr, package-install]
      common : Add GPG RPM keys for copr	TAGS: [common, network, package-copr, package-install]
      common : Enable extra COPRs	TAGS: [common, network, package-copr, package-install]
      common : upgrade all packages	TAGS: [common, network, package-install, package-upgrade]
      common : Create directory for custom RPMS	TAGS: [common, custom-rpms]
      common : Install rsync	TAGS: [common, custom-rpms, network, package-install]
      common : Synchronize RPMs	TAGS: [common, custom-rpms]
      common : find custom RPMs	TAGS: [common, custom-rpms]
      common : install custom RPMs	TAGS: [common, custom-rpms]
      common : install selinux tools	TAGS: [common, network, package-install]
      common : disable selinux for 389-DS installation	TAGS: [common, lxc]
      common : install firewalld	TAGS: [firewall, network, package-install, pki]
      common : check for firewalld	TAGS: [common, firewall]
      common : Enable and start firewalld	TAGS: [common, firewall]
      common : Open firewall ports elemental services	TAGS: [common, firewall]
      common : Install rng tools	TAGS: [common, network, package-install]
      common : Start the rngd service	TAGS: [common]
      common : tty-less sudo	TAGS: [common]
      bootstrap : Check default route	TAGS: [bootstrap]
      bootstrap : Create some default route	TAGS: [bootstrap]
      bootstrap : Check for dnf command	TAGS: [bootstrap, package-install]
      bootstrap : Auto select fastest DNF mirror	TAGS: [bootstrap, package-install]
      bootstrap : Refresh dnf cache	TAGS: [bootstrap, network, package-install]
      bootstrap : Install python2 and deps for ansible modules	TAGS: [bootstrap, network, package-install]
      bootstrap : Gather facts	TAGS: [bootstrap]
      bootstrap : Create directories in ipa_data_dir	TAGS: [bootstrap]
      bootstrap : Dummy (for ansible.skip_tags)	TAGS: [dummy]
      common : DNF or YUM?	TAGS: [common]
      common : Default facts (enable_packages, enable_network)	TAGS: [common]
      common : Override enable_packages=true	TAGS: [common, package-install]
      common : Override enable_network=true	TAGS: [common, network]
      common : Get nmcli device info	TAGS: [common]
      common : Set nmcli device info fact	TAGS: [common]
      common : fix /etc/hosts	TAGS: [common]
      common : Set FQDN hostname	TAGS: [common]
      common : Get timedatectl information	TAGS: [common]
      common : Set timezone to UTC	TAGS: [common]
      common : Disable dnf repos to prevent network access	TAGS: [common]
      common : Enable dnf repos	TAGS: [common]
      common : Auto select fastest DNF mirror	TAGS: [common, package-install]
      common : Enable yum for Fedora	TAGS: [common, network, package-install]
      common : Disable yum repos to prevent network access	TAGS: [common]
      common : Enable yum repos	TAGS: [common]
      common : Auto-select fastest yum mirror	TAGS: [common, network, package-install]
      common : Install gpg command for COPR / rpm_key	TAGS: [common, network, package-copr, package-install]
      common : Add GPG RPM keys for copr	TAGS: [common, network, package-copr, package-install]
      common : Enable extra COPRs	TAGS: [common, network, package-copr, package-install]
      common : upgrade all packages	TAGS: [common, network, package-install, package-upgrade]
      common : Create directory for custom RPMS	TAGS: [common, custom-rpms]
      common : Install rsync	TAGS: [common, custom-rpms, network, package-install]
      common : Synchronize RPMs	TAGS: [common, custom-rpms]
      common : find custom RPMs	TAGS: [common, custom-rpms]
      common : install custom RPMs	TAGS: [common, custom-rpms]
      common : install selinux tools	TAGS: [common, network, package-install]
      common : disable selinux for 389-DS installation	TAGS: [common, lxc]
      common : install firewalld	TAGS: [firewall, network, package-install, pki]
      common : check for firewalld	TAGS: [common, firewall]
      common : Enable and start firewalld	TAGS: [common, firewall]
      common : Open firewall ports elemental services	TAGS: [common, firewall]
      common : Install rng tools	TAGS: [common, network, package-install]
      common : Start the rngd service	TAGS: [common]
      common : tty-less sudo	TAGS: [common]
      pki-389ds : install 389-DS LDAP server	TAGS: [389ds, network, package-install]
      pki-389ds : create 389-DS instance	TAGS: [389ds]
      pki : install pki-server packages and dependencies	TAGS: [network, package-install, pki]
      pki : Open Firewall for services	TAGS: [firewall, pki]
      pki : Open Firewall for ports	TAGS: [firewall, pki]
      pki-kra : install pki-kra package	TAGS: [network, package-install, pkikra]
      pki-kra : Write KRA config template	TAGS: [pkikra]
      pki-kra : create KRA	TAGS: [ipa-install, pkikra]
      pki-kra : check for tomcat memory limit	TAGS: [pki, pki-install]
      pki-kra : limit tomcat memory	TAGS: [ipa-install, pki]
      pki-kra : restart tomcat	TAGS: [pki, pki-install]
      pki-kra : wait for tomcat	TAGS: [pki, pki-install]
      pki-kra : dump admin PKCS12 file to PEM file	TAGS: [pki, pki-install]
      pki-kra : fetch admin cert as /tmp/{{pki_instance_name}}_admin.pem	TAGS: [pki, pki-install]
